2025-05-23 16:18:31 [main] INFO  com.jervis.JervisApplicationKt - Starting JervisApplicationKt using Java 21.0.7 with PID 4933 (/Users/damekjan/git/jervis/target/classes started by damekjan in /Users/damekjan/git/jervis)
2025-05-23 16:18:31 [main] DEBUG com.jervis.JervisApplicationKt - Running with Spring Boot v3.4.5, Spring v6.2.6
2025-05-23 16:18:31 [main] INFO  com.jervis.JervisApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-05-23 16:18:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23 16:18:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-05-23 16:18:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-23 16:18:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-23 16:18:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-23 16:18:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-23 16:18:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 822 ms
2025-05-23 16:18:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-23 16:18:32 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/.jervis/jervis-db user=SA
2025-05-23 16:18:32 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-23 16:18:32 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-05-23 16:18:32 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 16:18:32 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-05-23 16:18:32 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 16:18:32 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-05-23 16:18:32 [main] INFO  liquibase.util - Run:                          0
2025-05-23 16:18:32 [main] INFO  liquibase.util - Previously run:               1
2025-05-23 16:18:32 [main] INFO  liquibase.util - Filtered out:                 0
2025-05-23 16:18:32 [main] INFO  liquibase.util - -------------------------------
2025-05-23 16:18:32 [main] INFO  liquibase.util - Total change sets:            1
2025-05-23 16:18:32 [main] INFO  liquibase.util - Update summary generated
2025-05-23 16:18:32 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-05-23 16:18:32 [main] INFO  liquibase.command - Command execution complete
2025-05-23 16:18:32 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23 16:18:32 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.13.Final
2025-05-23 16:18:32 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-23 16:18:33 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23 16:18:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23 16:18:33 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23 16:18:33 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23 16:18:33 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 16:18:33 [main] INFO  c.j.module.vectordb.VectorDbService - Initializing Qdrant client at localhost:6334
2025-05-23 16:18:34 [main] INFO  c.j.module.vectordb.VectorDbService - Collection code_vectors already exists
2025-05-23 16:18:34 [main] INFO  c.j.module.vectordb.VectorDbService - Collection text_vectors already exists
2025-05-23 16:18:34 [main] INFO  c.j.module.vectordb.VectorDbService - Collection unified_vectors already exists
2025-05-23 16:18:34 [main] INFO  c.j.module.vectordb.VectorDbService - Qdrant client initialized successfully
2025-05-23 16:18:34 [main] INFO  c.j.module.indexer.EmbeddingService - Initializing embedding models...
2025-05-23 16:18:34 [main] INFO  c.j.module.indexer.EmbeddingService - Loading code embedding model: intfloat/multilingual-e5-large
2025-05-23 16:18:34 [main] INFO  ai.djl.pytorch.engine.PtEngine - PyTorch graph executor optimizer is enabled, this may impact your inference latency and throughput. See: https://docs.djl.ai/master/docs/development/inference_performance_optimization.html#graph-executor-optimization
2025-05-23 16:18:34 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of inter-op threads is 8
2025-05-23 16:18:34 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of intra-op threads is 6
2025-05-23 16:18:36 [main] INFO  ai.djl.util.Platform - Found matching platform from: jar:file:/Users/damekjan/.m2/repository/ai/djl/huggingface/tokenizers/0.33.0/tokenizers-0.33.0.jar!/native/lib/tokenizers.properties
2025-05-23 16:18:37 [main] INFO  c.j.module.indexer.EmbeddingService - Loading text embedding model: intfloat/multilingual-e5-large
2025-05-23 16:18:38 [main] INFO  c.j.module.indexer.EmbeddingService - Embedding models initialized successfully
2025-05-23 16:18:38 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Initializing HuggingFace tokenizer with model: gpt2
2025-05-23 16:18:38 [main] WARN  a.d.h.t.HuggingFaceTokenizer - maxLength is not explicitly specified, use modelMaxLength: 512
2025-05-23 16:18:38 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer initialized successfully
2025-05-23 16:18:39 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23 16:18:39 [main] INFO  o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-05-23 16:18:39 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-23 16:18:39 [main] INFO  com.jervis.JervisApplicationKt - Started JervisApplicationKt in 8.868 seconds (process running for 9.418)
2025-05-23 16:18:40 [main] INFO  com.jervis.utils.MacOSAppUtils - Ikona v docku byla úspěšně nastavena pomocí Taskbar API
2025-05-23 16:19:22 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23 16:19:22 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-23 16:19:22 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-05-23 16:19:24 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Processing chat completion request: You are given a user's request to JetBrains intell...
2025-05-23 16:19:24 [http-nio-8080-exec-1] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:19:24 [http-nio-8080-exec-8] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:19:24 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:19:24 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:19:24 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:19:24 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:19:24 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:19:24 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:19:24 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:19:24 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:19:24 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:19:26 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:19:27 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:19:28 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:19:28 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:19:28 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:19:28 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:19:28 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Waiting for 58.376 seconds until rate limit window expires.
2025-05-23 16:20:24 [http-nio-8080-exec-7] INFO  c.jervis.service.CompletionService - Processing chat completion request: Je nutne celkove projekt ufo_engine refactorovat?
...
2025-05-23 16:20:24 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:20:25 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:20:26 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:20:26 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:20:26 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:20:26 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:20:27 [http-nio-8080-exec-10] ERROR c.jervis.service.CompletionService - Error processing chat completion request: 429 Too Many Requests on POST request for "https://api.anthropic.com/v1/messages": "{"type":"error","error":{"type":"rate_limit_error","message":"This request would exceed the rate limit for your organization (56dd2b99-1c8a-4b75-b078-e85f5b8798f1) of 4,000 output tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase."}}"
org.springframework.web.client.HttpClientErrorException$TooManyRequests: 429 Too Many Requests on POST request for "https://api.anthropic.com/v1/messages": "{"type":"error","error":{"type":"rate_limit_error","message":"This request would exceed the rate limit for your organization (56dd2b99-1c8a-4b75-b078-e85f5b8798f1) of 4,000 output tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase."}}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:130)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801)
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518)
	at com.jervis.module.llmcoordinator.LlmCoordinator.callAnthropicApi(LlmCoordinator.kt:208)
	at com.jervis.module.llmcoordinator.LlmCoordinator.processQuery(LlmCoordinator.kt:121)
	at com.jervis.module.llmcoordinator.LlmCoordinator.processQuery$default(LlmCoordinator.kt:101)
	at com.jervis.module.ragcore.RagOrchestrator.processQuery(RagOrchestrator.kt:51)
	at com.jervis.module.ragcore.RagOrchestrator.processQuery$default(RagOrchestrator.kt:28)
	at com.jervis.service.CompletionService.chatComplete(CompletionService.kt:110)
	at com.jervis.controller.LMStudioController.getChatCompletion(LMStudioController.kt:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:335)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-23 16:20:27 [http-nio-8080-exec-8] ERROR c.jervis.service.CompletionService - Error processing chat completion request: 429 Too Many Requests on POST request for "https://api.anthropic.com/v1/messages": "{"type":"error","error":{"type":"rate_limit_error","message":"This request would exceed the rate limit for your organization (56dd2b99-1c8a-4b75-b078-e85f5b8798f1) of 4,000 output tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase."}}"
org.springframework.web.client.HttpClientErrorException$TooManyRequests: 429 Too Many Requests on POST request for "https://api.anthropic.com/v1/messages": "{"type":"error","error":{"type":"rate_limit_error","message":"This request would exceed the rate limit for your organization (56dd2b99-1c8a-4b75-b078-e85f5b8798f1) of 4,000 output tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase."}}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:130)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801)
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518)
	at com.jervis.module.llmcoordinator.LlmCoordinator.callAnthropicApi(LlmCoordinator.kt:208)
	at com.jervis.module.llmcoordinator.LlmCoordinator.processQuery(LlmCoordinator.kt:121)
	at com.jervis.module.llmcoordinator.LlmCoordinator.processQuery$default(LlmCoordinator.kt:101)
	at com.jervis.service.CompletionService.chatComplete(CompletionService.kt:125)
	at com.jervis.controller.LMStudioController.getChatCompletion(LMStudioController.kt:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:335)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-23 16:20:29 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:20:29 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4047 tokens from 2025-05-23T14:19:26.804Z. Age: 62.53 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 768 tokens from 2025-05-23T14:19:27.646Z. Age: 61.693 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 2 token usage records. Current queue size: 8
2025-05-23 16:20:29 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:19:26.811Z. Age: 62.529 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:19:27.649Z. Age: 61.691 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 2 token usage records. Current queue size: 12
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Refined query: ufo_engine refactorovat
ufo_engine
refactorovat
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:20:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:20:29 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2022 tokens from 2025-05-23T14:19:28.427Z. Age: 61.079 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4041 tokens from 2025-05-23T14:19:28.433Z. Age: 61.073 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 2 token usage records. Current queue size: 7
2025-05-23 16:20:29 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:19:28.428Z. Age: 61.079 seconds
2025-05-23 16:20:29 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 1 token usage records. Current queue size: 13
2025-05-23 16:20:29 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 8243, Limit: 4000. Waiting for 57.299 seconds until rate limit window expires.
2025-05-23 16:21:26 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:21:26 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Refined query: No, the provided code context about the SynchronizationService in Kotlin is not necessary to determine if the entire ufo_engine project needs to be refactored. The code snippet does not contain any information relevant to answering the question about refactoring the project.

To better answer the question "Je nutne celkove projekt ufo_engine refactorovat?" (Is it necessary to refactor the entire ufo_engine project?), more relevant context would be needed, such as:

- Information about the current state of the ufo_engine project codebase 
- Any issues or technical debt in the existing code
- The goals and requirements driving a potential refactoring
- Input from the development team on the feasibility and scope of a refactoring effort

The provided code snippet about a specific SynchronizationService does not shed light on the overall project and if a full refactoring is warranted. More high-level architectural information and input from project stakeholders would be needed to make that determination.
2025-05-23 16:21:26 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:21:26 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:21:26 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Refined query: No.

The provided code snippet about the StorageService class in Kotlin is not relevant to answering the question "Je nutne celkove projekt ufo_engine refactorovat?" which translates from Czech to "Is it necessary to refactor the entire ufo_engine project?". The code is about low-level implementation details for storing trace data in MongoDB, while the question is asking for a high-level opinion on refactoring a project. The two topics are unrelated.
2025-05-23 16:21:26 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:21:26 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:21:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:21:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:21:31 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 399 tokens from 2025-05-23T14:20:26.813Z. Age: 64.78 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 3909 tokens from 2025-05-23T14:20:26.819Z. Age: 64.774 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4041 tokens from 2025-05-23T14:20:26.824Z. Age: 64.769 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 565 tokens from 2025-05-23T14:20:26.828Z. Age: 64.765 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1400 tokens from 2025-05-23T14:20:26.831Z. Age: 64.762 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2750 tokens from 2025-05-23T14:20:26.834Z. Age: 64.759 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2746 tokens from 2025-05-23T14:20:29.339Z. Age: 62.254 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 155 tokens from 2025-05-23T14:20:29.506Z. Age: 62.087 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 8 token usage records. Current queue size: 4
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.806Z. Age: 64.788 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.816Z. Age: 64.778 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:20:26.816Z. Age: 64.778 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 18 tokens from 2025-05-23T14:20:26.816Z. Age: 64.778 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:20:26.816Z. Age: 64.778 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.822Z. Age: 64.772 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.826Z. Age: 64.768 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.829Z. Age: 64.765 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.833Z. Age: 64.761 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:26.836Z. Age: 64.758 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:20:29.322Z. Age: 62.272 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:20:29.340Z. Age: 62.254 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 21 tokens from 2025-05-23T14:20:29.385Z. Age: 62.209 seconds
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 13 token usage records. Current queue size: 10
2025-05-23 16:21:31 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 5999, Limit: 4000. Waiting for 55.219 seconds until rate limit window expires.
2025-05-23 16:22:26 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:22:26 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:22:26 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:22:26 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Refined query: No. The provided context about the TracingStorage Kotlin class is not relevant to answering the question "Je nutne celkove projekt ufo_engine refactorovat?" which translates to "Is it necessary to refactor the entire ufo_engine project?". The code snippet describes implementation details of a tracing and logging system, but does not contain any information about the overall architecture or need for refactoring the ufo_engine project.

To better answer the original question, more relevant context would be needed, such as:

- High-level documentation about the ufo_engine project's purpose, scope and architecture 
- Information about pain points, technical debt or other issues that might necessitate a refactoring
- Discussions or meeting notes where a potential refactoring of ufo_engine was proposed or debated
- Code examples demonstrating parts of ufo_engine that are candidates for refactoring to improve the design

So in summary, the provided code snippet alone is not sufficient context to determine if a full refactoring is required. The query cannot be satisfactorily answered without more relevant information about the ufo_engine project itself.
2025-05-23 16:22:26 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Refined query: Here is a refined query to better retrieve relevant information about whether the ufo_engine project needs to be refactored:

Refined query: What are signs that a software project like ufo_engine needs major refactoring? What are best practices for deciding when to refactor a codebase?

This refined query focuses on:

1. General signs and indicators that any software project is due for a major refactoring. This can help determine if those signs apply to ufo_engine.

2. Best practices and guidelines for making the decision to refactor a project. Following an established decision making process can help objectively evaluate if refactoring ufo_engine makes sense.

The provided code snippet about FileSystemFailedRecordHandler doesn't seem directly relevant to answering if the overall ufo_engine project needs refactoring. More context would be needed about that specific class and the broader codebase to determine its relevance.

Let me know if you need any clarification or have additional context to provide! I'm happy to further refine the query if needed.
2025-05-23 16:22:26 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:22:26 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:22:27 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:22:27 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:22:28 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:22:28 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:22:29 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:22:39 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 319 tokens from 2025-05-23T14:21:26.855Z. Age: 72.574 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2746 tokens from 2025-05-23T14:21:26.858Z. Age: 72.571 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 885 tokens from 2025-05-23T14:21:27.564Z. Age: 71.865 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 464 tokens from 2025-05-23T14:21:27.566Z. Age: 71.863 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 369 tokens from 2025-05-23T14:21:31.593Z. Age: 67.836 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 5 token usage records. Current queue size: 4
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:21:26.813Z. Age: 72.618 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 343 tokens from 2025-05-23T14:21:26.813Z. Age: 72.619 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 221 tokens from 2025-05-23T14:21:26.813Z. Age: 72.619 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 107 tokens from 2025-05-23T14:21:26.813Z. Age: 72.619 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:21:26.813Z. Age: 72.619 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:21:26.856Z. Age: 72.576 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:21:26.859Z. Age: 72.573 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:21:27.565Z. Age: 71.867 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:21:27.567Z. Age: 71.865 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 204 tokens from 2025-05-23T14:21:31.587Z. Age: 67.845 seconds
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 10 token usage records. Current queue size: 13
2025-05-23 16:22:39 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 6360, Limit: 4000. Waiting for 47.396 seconds until rate limit window expires.
2025-05-23 16:23:26 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:23:26 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:23:29 [http-nio-8080-exec-1] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:23:53 [http-nio-8080-exec-7] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:46:37 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:46:37 [http-nio-8080-exec-7] INFO  c.jervis.service.CompletionService - Processing chat completion request: You are given a user's request to JetBrains intell...
2025-05-23 16:46:37 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:46:37 [http-nio-8080-exec-4] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:46:37 [http-nio-8080-exec-8] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:46:37 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:46:37 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:46:37 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:46:37 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:46:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:46:37 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1946 tokens from 2025-05-23T14:22:26.864Z. Age: 1450.908 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1664 tokens from 2025-05-23T14:22:26.869Z. Age: 1450.904 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 996 tokens from 2025-05-23T14:22:27.625Z. Age: 1450.148 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 924 tokens from 2025-05-23T14:22:27.627Z. Age: 1450.146 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2018 tokens from 2025-05-23T14:22:39.430Z. Age: 1438.343 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 756 tokens from 2025-05-23T14:23:26.857Z. Age: 1390.916 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 6 token usage records. Current queue size: 0
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:22:26.828Z. Age: 1450.946 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 300 tokens from 2025-05-23T14:22:26.828Z. Age: 1450.946 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 249 tokens from 2025-05-23T14:22:26.828Z. Age: 1450.946 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 230 tokens from 2025-05-23T14:22:26.828Z. Age: 1450.946 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 134 tokens from 2025-05-23T14:22:26.829Z. Age: 1450.945 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:22:26.866Z. Age: 1450.908 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:22:26.872Z. Age: 1450.902 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:22:27.626Z. Age: 1450.148 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:22:27.628Z. Age: 1450.146 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:22:28.658Z. Age: 1449.116 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 21 tokens from 2025-05-23T14:22:28.738Z. Age: 1449.036 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 5 tokens from 2025-05-23T14:22:29.976Z. Age: 1447.798 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 297 tokens from 2025-05-23T14:22:39.417Z. Age: 1438.357 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:23:26.834Z. Age: 1390.94 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 548 tokens from 2025-05-23T14:23:26.834Z. Age: 1390.941 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:23:26.858Z. Age: 1390.917 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 5 tokens from 2025-05-23T14:23:29.165Z. Age: 1388.61 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 685 tokens from 2025-05-23T14:23:53.563Z. Age: 1364.212 seconds
2025-05-23 16:46:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 18 token usage records. Current queue size: 0
2025-05-23 16:46:39 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:46:40 [http-nio-8080-exec-6] ERROR c.jervis.service.CompletionService - Error processing chat completion request: 429 Too Many Requests on POST request for "https://api.anthropic.com/v1/messages": "{"type":"error","error":{"type":"rate_limit_error","message":"This request would exceed the rate limit for your organization (56dd2b99-1c8a-4b75-b078-e85f5b8798f1) of 4,000 output tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase."}}"
org.springframework.web.client.HttpClientErrorException$TooManyRequests: 429 Too Many Requests on POST request for "https://api.anthropic.com/v1/messages": "{"type":"error","error":{"type":"rate_limit_error","message":"This request would exceed the rate limit for your organization (56dd2b99-1c8a-4b75-b078-e85f5b8798f1) of 4,000 output tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase."}}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:130)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801)
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518)
	at com.jervis.module.llmcoordinator.LlmCoordinator.callAnthropicApi(LlmCoordinator.kt:208)
	at com.jervis.module.llmcoordinator.LlmCoordinator.processQuery(LlmCoordinator.kt:121)
	at com.jervis.module.llmcoordinator.LlmCoordinator.processQuery$default(LlmCoordinator.kt:101)
	at com.jervis.service.CompletionService.chatComplete(CompletionService.kt:125)
	at com.jervis.controller.LMStudioController.getChatCompletion(LMStudioController.kt:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:335)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-23 16:46:40 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:46:41 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:46:41 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:46:41 [http-nio-8080-exec-8] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 9232, Limit: 10000. Waiting for 56.152 seconds until rate limit window expires.
2025-05-23 16:47:37 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Processing chat completion request: Je nutne celkove projekt ufo_engine refactorovat?
...
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:47:37 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:47:37 [http-nio-8080-exec-8] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:47:37 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:47:37 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:47:37 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Refined query: No

The provided code snippet is not relevant to determining whether the ufo_engine project needs to be refactored. The code is a Kotlin class named StorageService which handles ingesting trace data into MongoDB. It does not contain any information about the overall ufo_engine project architecture or refactoring needs.

To answer the question "Je nutne celkove projekt ufo_engine refactorovat?" (Is it necessary to refactor the entire ufo_engine project?), relevant context would include:

- Overview of the current ufo_engine architecture 
- Known pain points, bugs or maintainability issues with the existing code
- Project roadmap and planned new features
- Team velocity and ability to deliver value with the current codebase

The provided StorageService code snippet alone is too narrow in scope to determine project-wide refactoring needs. A broader view of the system is required to make that assessment.
2025-05-23 16:47:37 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Refined query: No, the provided context about the FailedRecordHandlerFactory Kotlin code is not relevant to determining whether the ufo_engine project needs to be refactored. The code snippet is about handling failed records in a queue system, which does not contain information to answer the question about refactoring the overall ufo_engine project.

To better answer the original query, more relevant context would be needed, such as:
- Information about the current state, architecture and code quality of the ufo_engine project 
- Reasons why refactoring is being considered
- Goals and expected benefits of refactoring the project
- Scope and effort required to refactor the project

A refined query to gather relevant context could be:
"What is the current state of the ufo_engine project and what are the main reasons refactoring is being considered? Please provide context on the project's architecture, code quality issues, goals of refactoring, and estimated scope of the refactoring effort."
2025-05-23 16:47:37 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:47:37 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:47:39 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Refined query: ufo_engine
refactor
projekt refactorovat
2025-05-23 16:47:39 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:47:43 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:47:43 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:47:43 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2022 tokens from 2025-05-23T14:46:37.773Z. Age: 65.316 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 3909 tokens from 2025-05-23T14:46:37.776Z. Age: 65.314 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 768 tokens from 2025-05-23T14:46:37.778Z. Age: 65.312 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4041 tokens from 2025-05-23T14:46:37.780Z. Age: 65.31 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4047 tokens from 2025-05-23T14:46:37.782Z. Age: 65.308 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4041 tokens from 2025-05-23T14:46:37.785Z. Age: 65.305 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2658 tokens from 2025-05-23T14:46:39.832Z. Age: 63.258 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1400 tokens from 2025-05-23T14:46:40.531Z. Age: 62.559 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2746 tokens from 2025-05-23T14:46:41.347Z. Age: 61.743 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2746 tokens from 2025-05-23T14:46:41.622Z. Age: 61.468 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 10 token usage records. Current queue size: 3
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:37.775Z. Age: 65.318 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:37.777Z. Age: 65.316 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:37.779Z. Age: 65.314 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:37.781Z. Age: 65.312 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:37.783Z. Age: 65.31 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:37.786Z. Age: 65.307 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:46:39.826Z. Age: 63.267 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:39.833Z. Age: 63.26 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:46:40.524Z. Age: 62.569 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:40.533Z. Age: 62.56 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:46:41.341Z. Age: 61.752 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:46:41.347Z. Age: 61.746 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:46:41.613Z. Age: 61.48 seconds
2025-05-23 16:47:43 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 13 token usage records. Current queue size: 9
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Refined query: No, the provided context about the TracingStorage Kotlin class is not necessary to determine if the entire ufo_engine project needs to be refactored. The code snippet appears to be an implementation detail, while the question is asking about a high-level decision regarding refactoring the project as a whole. To answer that, information about the overall project structure, architecture, pain points, and goals would be more relevant than a specific class.
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:47:44 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:47:45 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:47:45 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:47:45 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:47:46 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:47:46 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Refined query: No.

The provided code snippet about a SynchronizationService in Kotlin is not relevant to answering the question "Je nutne celkove projekt ufo_engine refactorovat?" which translates to "Is it necessary to refactor the entire ufo_engine project?". The code does not contain any information about the overall architecture or need for refactoring the ufo_engine project.

To better answer this question, the query should aim to retrieve information about:

1. The current state, architecture and code quality of the ufo_engine project 
2. Any pain points, technical debt or maintainability issues with the existing ufo_engine codebase
3. The effort, risks and benefits of doing a full refactoring of ufo_engine
4. Alternatives to a complete refactor, such as incremental improvements
2025-05-23 16:47:46 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:47:47 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:47:47 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 10095, Limit: 10000. Waiting for 50.104 seconds until rate limit window expires.
2025-05-23 16:48:37 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:48:37 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:48:37 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:48:37 [http-nio-8080-exec-7] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:48:37 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:48:37 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 16:48:39 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:48:39 [http-nio-8080-exec-8] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:48:39 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:48:49 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 399 tokens from 2025-05-23T14:47:37.782Z. Age: 71.4 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2750 tokens from 2025-05-23T14:47:37.792Z. Age: 71.39 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 565 tokens from 2025-05-23T14:47:37.794Z. Age: 71.388 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 150 tokens from 2025-05-23T14:47:43.090Z. Age: 66.092 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 864 tokens from 2025-05-23T14:47:43.095Z. Age: 66.087 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 808 tokens from 2025-05-23T14:47:43.098Z. Age: 66.084 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 451 tokens from 2025-05-23T14:47:45.039Z. Age: 64.143 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 366 tokens from 2025-05-23T14:47:46.911Z. Age: 62.271 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 709 tokens from 2025-05-23T14:47:47.676Z. Age: 61.506 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 9 token usage records. Current queue size: 4
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:37.781Z. Age: 71.402 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:37.784Z. Age: 71.399 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 214 tokens from 2025-05-23T14:47:37.784Z. Age: 71.399 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 201 tokens from 2025-05-23T14:47:37.784Z. Age: 71.399 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:47:37.784Z. Age: 71.399 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 11 tokens from 2025-05-23T14:47:37.784Z. Age: 71.399 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:37.793Z. Age: 71.39 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:37.796Z. Age: 71.387 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 16 tokens from 2025-05-23T14:47:39.710Z. Age: 69.473 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:43.093Z. Age: 66.09 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:43.097Z. Age: 66.087 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:43.099Z. Age: 66.085 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 94 tokens from 2025-05-23T14:47:44.150Z. Age: 65.034 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:45.040Z. Age: 64.144 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 154 tokens from 2025-05-23T14:47:46.896Z. Age: 62.288 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:47:46.912Z. Age: 62.272 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 185 tokens from 2025-05-23T14:47:46.963Z. Age: 62.221 seconds
2025-05-23 16:48:49 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 17 token usage records. Current queue size: 14
2025-05-23 16:48:49 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Refined query: Bohužel nemám dostatek kontextu ani informací z kódu nebo otevřeného souboru, abych mohl posoudit, zda je nutné projekt ufo_engine celkově refaktorovat. 

Pro lepší posouzení by bylo vhodné upřesnit dotaz například o:

- Jaké jsou hlavní problémy nebo nedostatky současného kódu? 
- Jsou v projektu porušeny nějaké principy čistého kódu nebo dobrého designu?
- Brání aktuální struktura a kvalita kódu dalšímu rozvoji a údržbě?
- Jaké nové požadavky a funkce se plánují a vyžadovaly by přepracování architektury?
- Kolik času a zdrojů je k dispozici na případný refactoring?

Bez těchto dodatečných informací lze těžko objektivně zhodnotit nutnost celkového refaktoringu. Určitě by ale bylo dobré pravidelně revidovat kvalitu kódu a postupnými úpravami jej udržovat čistý a udržovatelný.
2025-05-23 16:48:49 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 16:48:50 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 16:48:50 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 7707, Limit: 4000. Waiting for 47.403 seconds until rate limit window expires.
2025-05-23 16:49:37 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 16:49:37 [http-nio-8080-exec-4] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:49:45 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1258 tokens from 2025-05-23T14:48:37.804Z. Age: 67.987 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1665 tokens from 2025-05-23T14:48:37.807Z. Age: 67.985 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1893 tokens from 2025-05-23T14:48:37.810Z. Age: 67.982 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 319 tokens from 2025-05-23T14:48:37.814Z. Age: 67.978 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 4 token usage records. Current queue size: 2
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:48:37.783Z. Age: 68.01 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 229 tokens from 2025-05-23T14:48:37.783Z. Age: 68.01 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 256 tokens from 2025-05-23T14:48:37.783Z. Age: 68.01 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 205 tokens from 2025-05-23T14:48:37.783Z. Age: 68.01 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 24 tokens from 2025-05-23T14:48:37.783Z. Age: 68.01 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 310 tokens from 2025-05-23T14:48:37.783Z. Age: 68.01 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:48:37.805Z. Age: 67.988 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:48:37.808Z. Age: 67.985 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:48:37.812Z. Age: 67.981 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T14:48:37.815Z. Age: 67.978 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:48:39.420Z. Age: 66.373 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:48:39.535Z. Age: 66.258 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T14:48:39.686Z. Age: 66.107 seconds
2025-05-23 16:49:45 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 13 token usage records. Current queue size: 6
2025-05-23 16:50:00 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 16:59:31 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23 16:59:31 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-23 16:59:31 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Closing HuggingFace tokenizer
2025-05-23 16:59:31 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer closed successfully
2025-05-23 16:59:31 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Closing embedding models...
2025-05-23 16:59:32 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Embedding models closed successfully
2025-05-23 16:59:32 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Closing Qdrant client
2025-05-23 16:59:32 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Qdrant client closed successfully
2025-05-23 16:59:32 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 16:59:32 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-23 16:59:42 [main] INFO  com.jervis.JervisApplicationKt - Starting JervisApplicationKt using Java 21.0.7 with PID 7230 (/Users/damekjan/git/jervis/target/classes started by damekjan in /Users/damekjan/git/jervis)
2025-05-23 16:59:42 [main] DEBUG com.jervis.JervisApplicationKt - Running with Spring Boot v3.4.5, Spring v6.2.6
2025-05-23 16:59:42 [main] INFO  com.jervis.JervisApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-05-23 16:59:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23 16:59:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-05-23 16:59:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-23 16:59:43 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-23 16:59:43 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-23 16:59:43 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-23 16:59:43 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 992 ms
2025-05-23 16:59:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-23 16:59:43 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/.jervis/jervis-db user=SA
2025-05-23 16:59:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-23 16:59:43 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-05-23 16:59:43 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 16:59:43 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-05-23 16:59:43 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 16:59:43 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-05-23 16:59:43 [main] INFO  liquibase.util - Run:                          0
2025-05-23 16:59:43 [main] INFO  liquibase.util - Previously run:               1
2025-05-23 16:59:43 [main] INFO  liquibase.util - Filtered out:                 0
2025-05-23 16:59:43 [main] INFO  liquibase.util - -------------------------------
2025-05-23 16:59:43 [main] INFO  liquibase.util - Total change sets:            1
2025-05-23 16:59:43 [main] INFO  liquibase.util - Update summary generated
2025-05-23 16:59:43 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-05-23 16:59:43 [main] INFO  liquibase.command - Command execution complete
2025-05-23 16:59:43 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23 16:59:43 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.13.Final
2025-05-23 16:59:43 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-23 16:59:44 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23 16:59:44 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23 16:59:44 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23 16:59:44 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23 16:59:44 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 16:59:44 [main] INFO  c.j.module.vectordb.VectorDbService - Initializing Qdrant client at localhost:6334
2025-05-23 16:59:45 [main] INFO  c.j.module.vectordb.VectorDbService - Collection code_vectors already exists
2025-05-23 16:59:45 [main] INFO  c.j.module.vectordb.VectorDbService - Collection text_vectors already exists
2025-05-23 16:59:45 [main] INFO  c.j.module.vectordb.VectorDbService - Collection unified_vectors already exists
2025-05-23 16:59:45 [main] INFO  c.j.module.vectordb.VectorDbService - Qdrant client initialized successfully
2025-05-23 16:59:45 [main] INFO  c.j.module.indexer.EmbeddingService - Initializing embedding models...
2025-05-23 16:59:45 [main] INFO  c.j.module.indexer.EmbeddingService - Loading code embedding model: intfloat/multilingual-e5-large
2025-05-23 16:59:51 [main] INFO  ai.djl.pytorch.engine.PtEngine - PyTorch graph executor optimizer is enabled, this may impact your inference latency and throughput. See: https://docs.djl.ai/master/docs/development/inference_performance_optimization.html#graph-executor-optimization
2025-05-23 16:59:51 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of inter-op threads is 8
2025-05-23 16:59:51 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of intra-op threads is 6
2025-05-23 16:59:52 [main] INFO  ai.djl.util.Platform - Found matching platform from: jar:file:/Users/damekjan/.m2/repository/ai/djl/huggingface/tokenizers/0.33.0/tokenizers-0.33.0.jar!/native/lib/tokenizers.properties
2025-05-23 16:59:53 [main] INFO  c.j.module.indexer.EmbeddingService - Loading text embedding model: intfloat/multilingual-e5-large
2025-05-23 16:59:55 [main] INFO  c.j.module.indexer.EmbeddingService - Embedding models initialized successfully
2025-05-23 16:59:55 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Initializing HuggingFace tokenizer with model: gpt2
2025-05-23 16:59:55 [main] WARN  a.d.h.t.HuggingFaceTokenizer - maxLength is not explicitly specified, use modelMaxLength: 512
2025-05-23 16:59:55 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer initialized successfully
2025-05-23 16:59:57 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23 16:59:58 [main] INFO  o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-05-23 16:59:58 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-23 16:59:58 [main] INFO  com.jervis.JervisApplicationKt - Started JervisApplicationKt in 16.414 seconds (process running for 17.416)
2025-05-23 16:59:59 [main] INFO  com.jervis.utils.MacOSAppUtils - Ikona v docku byla úspěšně nastavena pomocí Taskbar API
2025-05-23 17:00:58 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23 17:00:58 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-23 17:00:58 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 85 ms
2025-05-23 17:01:05 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23 17:01:05 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-23 17:01:05 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Closing HuggingFace tokenizer
2025-05-23 17:01:05 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer closed successfully
2025-05-23 17:01:05 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Closing embedding models...
2025-05-23 17:01:06 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Embedding models closed successfully
2025-05-23 17:01:06 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Closing Qdrant client
2025-05-23 17:01:06 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Qdrant client closed successfully
2025-05-23 17:01:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:01:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-23 17:01:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-23 17:06:22 [main] INFO  com.jervis.JervisApplicationKt - Starting JervisApplicationKt using Java 21.0.7 with PID 7813 (/Users/damekjan/git/jervis/target/classes started by damekjan in /Users/damekjan/git/jervis)
2025-05-23 17:06:22 [main] DEBUG com.jervis.JervisApplicationKt - Running with Spring Boot v3.4.5, Spring v6.2.6
2025-05-23 17:06:22 [main] INFO  com.jervis.JervisApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-05-23 17:06:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23 17:06:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-05-23 17:06:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-23 17:06:23 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-23 17:06:23 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-23 17:06:23 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-23 17:06:23 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 918 ms
2025-05-23 17:06:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-23 17:06:24 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/.jervis/jervis-db user=SA
2025-05-23 17:06:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-23 17:06:24 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-05-23 17:06:24 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:06:24 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-05-23 17:06:24 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:06:24 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-05-23 17:06:24 [main] INFO  liquibase.util - Run:                          0
2025-05-23 17:06:24 [main] INFO  liquibase.util - Previously run:               1
2025-05-23 17:06:24 [main] INFO  liquibase.util - Filtered out:                 0
2025-05-23 17:06:24 [main] INFO  liquibase.util - -------------------------------
2025-05-23 17:06:24 [main] INFO  liquibase.util - Total change sets:            1
2025-05-23 17:06:24 [main] INFO  liquibase.util - Update summary generated
2025-05-23 17:06:24 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-05-23 17:06:24 [main] INFO  liquibase.command - Command execution complete
2025-05-23 17:06:24 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23 17:06:24 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.13.Final
2025-05-23 17:06:24 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-23 17:06:24 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23 17:06:24 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23 17:06:24 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23 17:06:25 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23 17:06:25 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:06:25 [main] INFO  c.j.module.vectordb.VectorDbService - Initializing Qdrant client at localhost:6334
2025-05-23 17:06:25 [main] INFO  c.j.module.vectordb.VectorDbService - Collection code_vectors already exists
2025-05-23 17:06:25 [main] INFO  c.j.module.vectordb.VectorDbService - Collection text_vectors already exists
2025-05-23 17:06:25 [main] INFO  c.j.module.vectordb.VectorDbService - Collection unified_vectors already exists
2025-05-23 17:06:25 [main] INFO  c.j.module.vectordb.VectorDbService - Qdrant client initialized successfully
2025-05-23 17:06:25 [main] INFO  c.j.module.indexer.EmbeddingService - Initializing embedding models...
2025-05-23 17:06:25 [main] INFO  c.j.module.indexer.EmbeddingService - Loading code embedding model: intfloat/multilingual-e5-large
2025-05-23 17:06:26 [main] INFO  ai.djl.pytorch.engine.PtEngine - PyTorch graph executor optimizer is enabled, this may impact your inference latency and throughput. See: https://docs.djl.ai/master/docs/development/inference_performance_optimization.html#graph-executor-optimization
2025-05-23 17:06:26 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of inter-op threads is 8
2025-05-23 17:06:26 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of intra-op threads is 6
2025-05-23 17:06:28 [main] INFO  ai.djl.util.Platform - Found matching platform from: jar:file:/Users/damekjan/.m2/repository/ai/djl/huggingface/tokenizers/0.33.0/tokenizers-0.33.0.jar!/native/lib/tokenizers.properties
2025-05-23 17:06:28 [main] INFO  c.j.module.indexer.EmbeddingService - Loading text embedding model: intfloat/multilingual-e5-large
2025-05-23 17:06:30 [main] INFO  c.j.module.indexer.EmbeddingService - Embedding models initialized successfully
2025-05-23 17:06:30 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Initializing HuggingFace tokenizer with model: gpt2
2025-05-23 17:06:31 [main] WARN  a.d.h.t.HuggingFaceTokenizer - maxLength is not explicitly specified, use modelMaxLength: 512
2025-05-23 17:06:31 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer initialized successfully
2025-05-23 17:06:33 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23 17:06:33 [main] INFO  o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-05-23 17:06:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-23 17:06:33 [main] INFO  com.jervis.JervisApplicationKt - Started JervisApplicationKt in 11.286 seconds (process running for 11.989)
2025-05-23 17:06:35 [main] INFO  com.jervis.utils.MacOSAppUtils - Ikona v docku byla úspěšně nastavena pomocí Taskbar API
2025-05-23 17:07:42 [Thread-2] INFO  com.jervis.service.ChatService - Processing chat query: Je pom v ufo_framework dostatecne dobre napsane pro moznost jednotneho buildu celeho projektu? Neni modul ufo_dependency navic pokud je to parent pro ufo_framework?
2025-05-23 17:07:42 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 1: Initial RAG query
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:07:44 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:07:49 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 2: LLM query refinement
2025-05-23 17:07:53 [Thread-2] DEBUG com.jervis.service.ChatService - Refined query: To refine the query and retrieve more relevant information, I suggest breaking it down into more specific questions and focusing on key concepts. Here's a refined set of queries:

1. What is the structure of the pom.xml file in ufo_framework?

2. Does the ufo_framework pom.xml support a unified build process for the entire project?

3. What is the relationship between ufo_dependency and ufo_framework in the project structure?

4. Is ufo_dependency a parent module for ufo_framework? If so, what purpose does it serve?

5. Are there any redundancies or unnecessary modules in the project structure, particularly regarding ufo_dependency and ufo_framework?

6. What are the best practices for organizing dependencies and build configurations in a multi-module Maven project like this one?

These refined queries should help retrieve more specific and relevant information about the project structure, build process, and the roles of ufo_framework and ufo_dependency within the project.
2025-05-23 17:07:53 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 3: Final RAG query with refined query
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:07:54 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:07:57 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 4: LLM processing of final RAG result
2025-05-23 17:07:57 [Thread-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3669, Limit: 4000. Waiting for 46.699 seconds until rate limit window expires.
2025-05-23 17:08:27 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23 17:08:27 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-23 17:08:27 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-05-23 17:08:44 [Thread-2] INFO  c.j.m.l.TokenRateLimiter - Finished waiting for OUTPUT token rate limit. Cleaning up old records.
2025-05-23 17:08:48 [Thread-2] INFO  com.jervis.service.ChatService - Chat query processed successfully
2025-05-23 17:13:26 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23 17:13:26 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-23 17:13:26 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Closing HuggingFace tokenizer
2025-05-23 17:13:26 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer closed successfully
2025-05-23 17:13:26 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Closing embedding models...
2025-05-23 17:13:28 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Embedding models closed successfully
2025-05-23 17:13:28 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Closing Qdrant client
2025-05-23 17:13:28 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Qdrant client closed successfully
2025-05-23 17:13:28 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:13:28 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-23 17:13:28 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-23 17:13:35 [main] INFO  com.jervis.JervisApplicationKt - Starting JervisApplicationKt using Java 21.0.7 with PID 8756 (/Users/damekjan/git/jervis/target/classes started by damekjan in /Users/damekjan/git/jervis)
2025-05-23 17:13:35 [main] DEBUG com.jervis.JervisApplicationKt - Running with Spring Boot v3.4.5, Spring v6.2.6
2025-05-23 17:13:35 [main] INFO  com.jervis.JervisApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-05-23 17:13:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23 17:13:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 2 JPA repository interfaces.
2025-05-23 17:13:36 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-23 17:13:36 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-23 17:13:36 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-23 17:13:36 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-23 17:13:36 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1044 ms
2025-05-23 17:13:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-23 17:13:36 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/.jervis/jervis-db user=SA
2025-05-23 17:13:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-23 17:13:36 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-05-23 17:13:37 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:13:37 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-05-23 17:13:37 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:13:37 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-05-23 17:13:37 [main] INFO  liquibase.util - Run:                          0
2025-05-23 17:13:37 [main] INFO  liquibase.util - Previously run:               1
2025-05-23 17:13:37 [main] INFO  liquibase.util - Filtered out:                 0
2025-05-23 17:13:37 [main] INFO  liquibase.util - -------------------------------
2025-05-23 17:13:37 [main] INFO  liquibase.util - Total change sets:            1
2025-05-23 17:13:37 [main] INFO  liquibase.util - Update summary generated
2025-05-23 17:13:37 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-05-23 17:13:37 [main] INFO  liquibase.command - Command execution complete
2025-05-23 17:13:37 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23 17:13:37 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.13.Final
2025-05-23 17:13:37 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-23 17:13:37 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23 17:13:37 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23 17:13:37 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23 17:13:38 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23 17:13:38 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:13:38 [main] INFO  c.j.module.vectordb.VectorDbService - Initializing Qdrant client at localhost:6334
2025-05-23 17:13:38 [main] INFO  c.j.module.vectordb.VectorDbService - Collection code_vectors already exists
2025-05-23 17:13:38 [main] INFO  c.j.module.vectordb.VectorDbService - Collection text_vectors already exists
2025-05-23 17:13:38 [main] INFO  c.j.module.vectordb.VectorDbService - Collection unified_vectors already exists
2025-05-23 17:13:38 [main] INFO  c.j.module.vectordb.VectorDbService - Qdrant client initialized successfully
2025-05-23 17:13:38 [main] INFO  c.j.module.indexer.EmbeddingService - Initializing embedding models...
2025-05-23 17:13:38 [main] INFO  c.j.module.indexer.EmbeddingService - Loading code embedding model: intfloat/multilingual-e5-large
2025-05-23 17:13:44 [main] INFO  ai.djl.pytorch.engine.PtEngine - PyTorch graph executor optimizer is enabled, this may impact your inference latency and throughput. See: https://docs.djl.ai/master/docs/development/inference_performance_optimization.html#graph-executor-optimization
2025-05-23 17:13:44 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of inter-op threads is 8
2025-05-23 17:13:44 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of intra-op threads is 6
2025-05-23 17:13:45 [main] INFO  ai.djl.util.Platform - Found matching platform from: jar:file:/Users/damekjan/.m2/repository/ai/djl/huggingface/tokenizers/0.33.0/tokenizers-0.33.0.jar!/native/lib/tokenizers.properties
2025-05-23 17:13:46 [main] INFO  c.j.module.indexer.EmbeddingService - Loading text embedding model: intfloat/multilingual-e5-large
2025-05-23 17:13:48 [main] INFO  c.j.module.indexer.EmbeddingService - Embedding models initialized successfully
2025-05-23 17:13:48 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Initializing HuggingFace tokenizer with model: gpt2
2025-05-23 17:13:49 [main] WARN  a.d.h.t.HuggingFaceTokenizer - maxLength is not explicitly specified, use modelMaxLength: 512
2025-05-23 17:13:49 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer initialized successfully
2025-05-23 17:13:50 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23 17:13:50 [main] INFO  o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-05-23 17:13:50 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-23 17:13:50 [main] INFO  com.jervis.JervisApplicationKt - Started JervisApplicationKt in 15.279 seconds (process running for 16.009)
2025-05-23 17:13:52 [main] INFO  com.jervis.utils.MacOSAppUtils - Ikona v docku byla úspěšně nastavena pomocí Taskbar API
2025-05-23 17:14:28 [Thread-2] INFO  com.jervis.service.ChatService - Processing chat query: Najdi mistio kde se projekt muildi a na cem je zavisly
2025-05-23 17:14:28 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 1: Initial RAG query
2025-05-23 17:14:32 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23 17:14:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-23 17:14:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 33 ms
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:14:33 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:14:36 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 2: LLM query refinement
2025-05-23 17:14:40 [Thread-2] DEBUG com.jervis.service.ChatService - Refined query: Based on the original query and the lack of initial context, I'll refine the query to make it more specific and correct any potential spelling errors. The original query appears to be in Czech or a similar Slavic language, so I'll provide a refined version in both Czech and English.

Refined query in Czech:
"Kde se projekt builduje a na čem je závislý?"

Refined query in English:
"Where is the project built and what are its dependencies?"

These refined queries aim to:
1. Correct spelling errors (e.g., "muildi" to "builduje" or "built")
2. Clarify the intent of the question
3. Use more standard terminology related to software development
4. Make the query more concise and focused

The refined queries should help retrieve more relevant information about the project's build location and its dependencies from the knowledge base.
2025-05-23 17:14:40 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 3: Final RAG query with refined query
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:14:41 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:14:44 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 4: LLM processing of final RAG result
2025-05-23 17:14:44 [Thread-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3486, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:14:51 [Thread-2] INFO  com.jervis.service.ChatService - Chat query processed successfully
2025-05-23 17:22:06 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23 17:22:06 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-23 17:22:06 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Closing HuggingFace tokenizer
2025-05-23 17:22:06 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer closed successfully
2025-05-23 17:22:06 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Closing embedding models...
2025-05-23 17:22:08 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Embedding models closed successfully
2025-05-23 17:22:08 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Closing Qdrant client
2025-05-23 17:22:08 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Qdrant client closed successfully
2025-05-23 17:22:08 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:22:08 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-23 17:22:08 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-23 17:22:11 [main] INFO  com.jervis.JervisApplicationKt - Starting JervisApplicationKt using Java 21.0.7 with PID 9374 (/Users/damekjan/git/jervis/target/classes started by damekjan in /Users/damekjan/git/jervis)
2025-05-23 17:22:11 [main] DEBUG com.jervis.JervisApplicationKt - Running with Spring Boot v3.4.5, Spring v6.2.6
2025-05-23 17:22:11 [main] INFO  com.jervis.JervisApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-05-23 17:22:12 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23 17:22:12 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 2 JPA repository interfaces.
2025-05-23 17:22:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-23 17:22:12 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-23 17:22:12 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-23 17:22:12 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-23 17:22:12 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 857 ms
2025-05-23 17:22:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-23 17:22:12 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/.jervis/jervis-db user=SA
2025-05-23 17:22:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-23 17:22:12 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-05-23 17:22:13 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:22:13 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-05-23 17:22:13 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:22:13 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-05-23 17:22:13 [main] INFO  liquibase.util - Run:                          0
2025-05-23 17:22:13 [main] INFO  liquibase.util - Previously run:               1
2025-05-23 17:22:13 [main] INFO  liquibase.util - Filtered out:                 0
2025-05-23 17:22:13 [main] INFO  liquibase.util - -------------------------------
2025-05-23 17:22:13 [main] INFO  liquibase.util - Total change sets:            1
2025-05-23 17:22:13 [main] INFO  liquibase.util - Update summary generated
2025-05-23 17:22:13 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-05-23 17:22:13 [main] INFO  liquibase.command - Command execution complete
2025-05-23 17:22:13 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23 17:22:13 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.13.Final
2025-05-23 17:22:13 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-23 17:22:13 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23 17:22:13 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23 17:22:13 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23 17:22:13 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23 17:22:13 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:22:14 [main] INFO  c.j.module.vectordb.VectorDbService - Initializing Qdrant client at localhost:6334
2025-05-23 17:22:14 [main] INFO  c.j.module.vectordb.VectorDbService - Collection code_vectors already exists
2025-05-23 17:22:14 [main] INFO  c.j.module.vectordb.VectorDbService - Collection text_vectors already exists
2025-05-23 17:22:14 [main] INFO  c.j.module.vectordb.VectorDbService - Collection unified_vectors already exists
2025-05-23 17:22:14 [main] INFO  c.j.module.vectordb.VectorDbService - Qdrant client initialized successfully
2025-05-23 17:22:14 [main] INFO  c.j.module.indexer.EmbeddingService - Initializing embedding models...
2025-05-23 17:22:14 [main] INFO  c.j.module.indexer.EmbeddingService - Loading code embedding model: intfloat/multilingual-e5-large
2025-05-23 17:22:15 [main] INFO  ai.djl.pytorch.engine.PtEngine - PyTorch graph executor optimizer is enabled, this may impact your inference latency and throughput. See: https://docs.djl.ai/master/docs/development/inference_performance_optimization.html#graph-executor-optimization
2025-05-23 17:22:15 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of inter-op threads is 8
2025-05-23 17:22:15 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of intra-op threads is 6
2025-05-23 17:22:16 [main] INFO  ai.djl.util.Platform - Found matching platform from: jar:file:/Users/damekjan/.m2/repository/ai/djl/huggingface/tokenizers/0.33.0/tokenizers-0.33.0.jar!/native/lib/tokenizers.properties
2025-05-23 17:22:17 [main] INFO  c.j.module.indexer.EmbeddingService - Loading text embedding model: intfloat/multilingual-e5-large
2025-05-23 17:22:18 [main] INFO  c.j.module.indexer.EmbeddingService - Embedding models initialized successfully
2025-05-23 17:22:18 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Initializing HuggingFace tokenizer with model: gpt2
2025-05-23 17:22:19 [main] WARN  a.d.h.t.HuggingFaceTokenizer - maxLength is not explicitly specified, use modelMaxLength: 512
2025-05-23 17:22:19 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer initialized successfully
2025-05-23 17:22:19 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23 17:22:19 [main] INFO  o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-05-23 17:22:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-23 17:22:19 [main] INFO  com.jervis.JervisApplicationKt - Started JervisApplicationKt in 8.535 seconds (process running for 9.289)
2025-05-23 17:22:21 [main] INFO  com.jervis.utils.MacOSAppUtils - Ikona v docku byla úspěšně nastavena pomocí Taskbar API
2025-05-23 17:22:45 [Thread-2] INFO  com.jervis.service.ChatService - Processing chat query: Najdi tridy ktere maji zaukol resit a handlovat mapovani v engine a v mediatoru
2025-05-23 17:22:45 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 1: Initial RAG query
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:22:47 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:22:52 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 2: LLM query refinement
2025-05-23 17:22:56 [Thread-2] DEBUG com.jervis.service.ChatService - Refined query: To refine the query and retrieve more relevant information, I'll translate the original query from Czech to English and then expand it with more specific terms related to mapping, engine, and mediator classes. Here's a refined version:

Refined query:
Find classes responsible for handling and resolving mapping in the engine and mediator components. Include classes related to data mapping, object mapping, or entity mapping. Look for classes with names containing "Mapper," "MappingHandler," or "MappingResolver" in both the engine and mediator modules. Also, search for classes implementing mapping interfaces or using mapping annotations.

This refined query:
1. Clarifies the main objective (finding classes for mapping)
2. Specifies the components (engine and mediator)
3. Expands on types of mapping (data, object, entity)
4. Suggests potential class naming conventions
5. Includes implementation details (interfaces and annotations)

This should help retrieve more relevant information from the knowledge base about classes handling mapping in the engine and mediator components.
2025-05-23 17:22:56 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 3: Final RAG query with refined query
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:22:57 [Thread-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:23:09 [Thread-2] DEBUG com.jervis.service.ChatService - Phase 4: LLM processing of final RAG result
2025-05-23 17:23:09 [Thread-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3817, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:23:14 [Thread-2] INFO  com.jervis.service.ChatService - Chat query processed successfully
2025-05-23 17:23:33 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23 17:23:33 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-23 17:23:33 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-05-23 17:25:07 [Thread-3] INFO  com.jervis.service.ChatService - Processing chat query: Classes that implement mapping interfaces najdi tyto tridy a popis jejich funkci
2025-05-23 17:25:07 [Thread-3] DEBUG com.jervis.service.ChatService - Phase 1: Initial RAG query
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:25:13 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 164 tokens from 2025-05-23T15:22:47.431Z. Age: 145.721 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 151 tokens from 2025-05-23T15:22:52.652Z. Age: 140.513 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 939 tokens from 2025-05-23T15:22:57.774Z. Age: 135.391 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 694 tokens from 2025-05-23T15:23:09.237Z. Age: 123.928 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 4 token usage records. Current queue size: 0
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:22:47.434Z. Age: 145.736 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 220 tokens from 2025-05-23T15:22:52.598Z. Age: 140.572 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:22:52.654Z. Age: 140.516 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 227 tokens from 2025-05-23T15:22:56.875Z. Age: 136.295 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:22:57.776Z. Age: 135.394 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 298 tokens from 2025-05-23T15:23:09.206Z. Age: 123.964 seconds
2025-05-23 17:25:13 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 6 token usage records. Current queue size: 0
2025-05-23 17:25:17 [Thread-3] DEBUG com.jervis.service.ChatService - Phase 2: LLM query refinement
2025-05-23 17:25:21 [Thread-3] DEBUG com.jervis.service.ChatService - Refined query: To refine the query and retrieve more relevant information, I'll focus on the key elements and translate the Czech part. Here's a refined query:

Refined query: "Java classes that implement Map interface and their functions"

Explanation of refinements:
1. Specified "Java" as the programming language, as Map interfaces are commonly associated with Java.
2. Changed "mapping interfaces" to "Map interface" which is more specific and commonly used terminology in Java.
3. Translated and incorporated the Czech phrase "najdi tyto tridy a popis jejich funkci" which means "find these classes and describe their functions" into the query.
4. Removed unnecessary words to make the query more concise and focused.

This refined query should help retrieve more relevant information about Java classes that implement the Map interface and details about their functions from the knowledge base.
2025-05-23 17:25:21 [Thread-3] DEBUG com.jervis.service.ChatService - Phase 3: Final RAG query with refined query
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:25:22 [Thread-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:25:35 [Thread-3] DEBUG com.jervis.service.ChatService - Phase 4: LLM processing of final RAG result
2025-05-23 17:25:35 [Thread-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3804, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:25:47 [Thread-3] INFO  com.jervis.service.ChatService - Chat query processed successfully
2025-05-23 17:26:25 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:26:25 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Processing chat completion request: You are given a user's request to JetBrains intell...
2025-05-23 17:26:25 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:26:25 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:26:25 [http-nio-8080-exec-1] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:26:25 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:26:25 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:25 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:25 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:25 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:25 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:25 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:29 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:29 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:29 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:29 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:29 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 165 tokens from 2025-05-23T15:25:13.167Z. Age: 76.849 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 151 tokens from 2025-05-23T15:25:17.516Z. Age: 72.501 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 788 tokens from 2025-05-23T15:25:22.125Z. Age: 67.892 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 3 token usage records. Current queue size: 1
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:25:13.170Z. Age: 76.852 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 157 tokens from 2025-05-23T15:25:17.507Z. Age: 72.516 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:25:17.518Z. Age: 72.505 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 186 tokens from 2025-05-23T15:25:21.351Z. Age: 68.672 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:25:22.129Z. Age: 67.894 seconds
2025-05-23 17:26:30 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 5 token usage records. Current queue size: 1
2025-05-23 17:26:30 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3461, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:30 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3461, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:30 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3461, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:30 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:30 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3461, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:31 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:31 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3461, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:31 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:31 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3466, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:31 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Refined query: LDAP authorization
ufo_engine LDAP
authorizeLDAP
LDAP authentication
ufo_engine authorization
2025-05-23 17:26:31 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:32 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:32 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3470, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:32 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3470, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:32 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:32 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:32 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:32 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Refined query: No.
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:32 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:32 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "How is LDAP authorization implemented in the ufo_engine?"
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the implementation of LDAP authorization specifically within the `ufo_engine` framework required to understand the task in the user's input in the chat session?"
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the context related to LDAP authorization implementation in the ufo_engine required to solve the user's task?"
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:33 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:33 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:33 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:33 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:33 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:33 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the information about LDAP authorization implementation in the `ufo_engine` necessary for understanding the `TrayWindowManager.kt` class functionality?"
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:34 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:34 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:34 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:34 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:35 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:35 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:35 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:26:35 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:26:36 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:36 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3474, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:36 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:36 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 594 tokens from 2025-05-23T15:25:35.462Z. Age: 61.298 seconds
2025-05-23 17:26:36 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 1 token usage records. Current queue size: 21
2025-05-23 17:26:36 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 389 tokens from 2025-05-23T15:25:35.433Z. Age: 61.328 seconds
2025-05-23 17:26:36 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 1 token usage records. Current queue size: 6
2025-05-23 17:26:36 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:37 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:37 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:37 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:37 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:26:37 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:37 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:26:37 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Processing chat completion request: Jak je implementovana authorizace pres LDAP v ufo_...
2025-05-23 17:26:37 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:26:37 [http-nio-8080-exec-1] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:26:38 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:38 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:38 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:40 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:26:40 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:42 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: Can you provide details on the implementation of LDAP-based authorization in the UFO Engine, including the authentication process, configuration settings, and any integration with existing user management systems?
2025-05-23 17:26:42 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:26:43 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:26:43 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:44 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:26:44 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3085, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:26:49 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:09 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:30:09 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:30:09 [http-nio-8080-exec-4] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:30:09 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Processing chat completion request: You are given a user's request to JetBrains intell...
2025-05-23 17:30:09 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:30:09 [http-nio-8080-exec-1] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:30:09 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:09 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:09 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:09 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:09 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:09 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:14 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:14 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:14 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:14 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:14 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:14 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2668 tokens from 2025-05-23T15:26:30.018Z. Age: 224.805 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1387 tokens from 2025-05-23T15:26:30.025Z. Age: 224.799 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4046 tokens from 2025-05-23T15:26:30.031Z. Age: 224.793 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2941 tokens from 2025-05-23T15:26:30.036Z. Age: 224.788 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 774 tokens from 2025-05-23T15:26:30.041Z. Age: 224.783 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4048 tokens from 2025-05-23T15:26:30.044Z. Age: 224.78 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 568 tokens from 2025-05-23T15:26:30.987Z. Age: 223.837 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2013 tokens from 2025-05-23T15:26:31.367Z. Age: 223.457 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 977 tokens from 2025-05-23T15:26:31.858Z. Age: 222.966 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2750 tokens from 2025-05-23T15:26:32.115Z. Age: 222.709 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 2751 tokens from 2025-05-23T15:26:32.117Z. Age: 222.707 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1831 tokens from 2025-05-23T15:26:32.167Z. Age: 222.658 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 190 tokens from 2025-05-23T15:26:32.197Z. Age: 222.628 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 107 tokens from 2025-05-23T15:26:32.919Z. Age: 221.906 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 160 tokens from 2025-05-23T15:26:33.400Z. Age: 221.425 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 240 tokens from 2025-05-23T15:26:33.461Z. Age: 221.364 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 202 tokens from 2025-05-23T15:26:33.759Z. Age: 221.066 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 237 tokens from 2025-05-23T15:26:34.619Z. Age: 220.206 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1441 tokens from 2025-05-23T15:26:34.902Z. Age: 219.923 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1475 tokens from 2025-05-23T15:26:35.315Z. Age: 219.51 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 394 tokens from 2025-05-23T15:26:36.205Z. Age: 218.62 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1044 tokens from 2025-05-23T15:26:36.760Z. Age: 218.065 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1160 tokens from 2025-05-23T15:26:37.067Z. Age: 217.758 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 638 tokens from 2025-05-23T15:26:37.312Z. Age: 217.513 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 147 tokens from 2025-05-23T15:26:38.823Z. Age: 216.002 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 139 tokens from 2025-05-23T15:26:40.373Z. Age: 214.452 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 276 tokens from 2025-05-23T15:26:43.027Z. Age: 211.798 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 236 tokens from 2025-05-23T15:26:44.420Z. Age: 210.405 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 28 token usage records. Current queue size: 0
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:26:30.023Z. Age: 224.804 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:26:30.028Z. Age: 224.799 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 1024 tokens from 2025-05-23T15:26:30.032Z. Age: 224.795 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 5 tokens from 2025-05-23T15:26:31.850Z. Age: 222.977 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T15:26:32.109Z. Age: 222.718 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Removed token usage record: 4 tokens from 2025-05-23T15:26:32.161Z. Age: 222.666 seconds
2025-05-23 17:30:14 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Cleaned up 6 token usage records. Current queue size: 0
2025-05-23 17:30:14 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:14 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:14 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:16 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:16 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3076, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:17 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:17 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3080, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:17 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:17 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3080, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:17 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:17 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3080, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:17 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:17 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3080, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:18 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:18 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Refined query: Does the context involving "OracleMeasureSaver" and "MeasuringPointJdbcAsyncWriter" relate to the implementation of data transmission in the provided `StorageService.kt` file? Answer only with yes or no.
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:18 [http-nio-8080-exec-1] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:18 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:18 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the context involving the OracleMeasureSaver and MeasuringPointJdbcAsyncWriter necessary to determine the process of sending measurement points within the existing synchronization services implementation?"
2025-05-23 17:30:18 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:19 [http-nio-8080-exec-6] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:19 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:19 [http-nio-8080-exec-1] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:19 [http-nio-8080-exec-1] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Refined query: OracleMeasureSaver  
MeasuringPointJdbcAsyncWriter  
odesilani merici body
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:20 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:20 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: Is the context related to the data transmission process using `OracleMeasureSaver` and `MeasuringPointJdbcAsyncWriter` necessary to understand the operation of `ContainerReconstructionScheduler` in the provided code? Answer only with yes or no.
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:20 [http-nio-8080-exec-4] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:20 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:21 [http-nio-8080-exec-1] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the OracleMeasureSaver utilizing MeasuringPointJdbcAsyncWriter for sending measurement points, and is there any link between this functionality and the TracingStorage service handling trace and log data?"
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:21 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:21 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:21 [http-nio-8080-exec-4] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:21 [http-nio-8080-exec-4] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:21 [http-nio-8080-exec-6] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:21 [http-nio-8080-exec-6] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:22 [http-nio-8080-exec-4] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:23 [http-nio-8080-exec-6] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:25 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:25 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for INPUT tokens. Current usage: 38781, Limit: 40000. Falling back to OpenAI.
2025-05-23 17:30:25 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:25 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:25 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:26 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:26 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Processing chat completion request: Opravdu se odesilaji merici body pres OracleMeasur...
2025-05-23 17:30:26 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:27 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:27 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: 
"Is the StepSynchronizationService related to the process of sending measuring points using OracleMeasureSaver and MeasuringPointJdbcAsyncWriter?"
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:27 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:27 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:28 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:30:28 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:29 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:29 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for INPUT tokens. Current usage: 39751, Limit: 40000. Falling back to OpenAI.
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: Jaký je proces odesílání měřicích bodů pomocí OracleMeasureSaver a MeasuringPointJdbcAsyncWriter? Jak tyto komponenty spolupracují při ukládání dat?
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:30:30 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:30:30 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:30:30 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3115, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:30:33 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:30:33 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for INPUT tokens. Current usage: 39978, Limit: 40000. Falling back to OpenAI.
2025-05-23 17:30:35 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:36:18 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23 17:36:18 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-23 17:36:18 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Closing HuggingFace tokenizer
2025-05-23 17:36:18 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer closed successfully
2025-05-23 17:36:18 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Closing embedding models...
2025-05-23 17:36:20 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Embedding models closed successfully
2025-05-23 17:36:20 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Closing Qdrant client
2025-05-23 17:36:20 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Qdrant client closed successfully
2025-05-23 17:36:20 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:36:20 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-23 17:36:20 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-23 17:36:28 [main] INFO  com.jervis.JervisApplicationKt - Starting JervisApplicationKt using Java 21.0.7 with PID 10210 (/Users/damekjan/git/jervis/target/classes started by damekjan in /Users/damekjan/git/jervis)
2025-05-23 17:36:28 [main] DEBUG com.jervis.JervisApplicationKt - Running with Spring Boot v3.4.5, Spring v6.2.6
2025-05-23 17:36:28 [main] INFO  com.jervis.JervisApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-05-23 17:36:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23 17:36:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-05-23 17:36:29 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-23 17:36:29 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-23 17:36:29 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-23 17:36:29 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-23 17:36:29 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 919 ms
2025-05-23 17:36:29 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-23 17:36:29 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/.jervis/jervis-db user=SA
2025-05-23 17:36:29 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-23 17:36:29 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-05-23 17:36:30 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:36:30 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-05-23 17:36:30 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-05-23 17:36:30 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-05-23 17:36:30 [main] INFO  liquibase.util - Run:                          0
2025-05-23 17:36:30 [main] INFO  liquibase.util - Previously run:               1
2025-05-23 17:36:30 [main] INFO  liquibase.util - Filtered out:                 0
2025-05-23 17:36:30 [main] INFO  liquibase.util - -------------------------------
2025-05-23 17:36:30 [main] INFO  liquibase.util - Total change sets:            1
2025-05-23 17:36:30 [main] INFO  liquibase.util - Update summary generated
2025-05-23 17:36:30 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-05-23 17:36:30 [main] INFO  liquibase.command - Command execution complete
2025-05-23 17:36:30 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23 17:36:30 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.13.Final
2025-05-23 17:36:30 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-23 17:36:30 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23 17:36:30 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23 17:36:30 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23 17:36:30 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23 17:36:30 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:36:31 [main] INFO  c.j.module.vectordb.VectorDbService - Initializing Qdrant client at localhost:6334
2025-05-23 17:36:31 [main] INFO  c.j.module.vectordb.VectorDbService - Collection code_vectors already exists
2025-05-23 17:36:31 [main] INFO  c.j.module.vectordb.VectorDbService - Collection text_vectors already exists
2025-05-23 17:36:31 [main] INFO  c.j.module.vectordb.VectorDbService - Collection unified_vectors already exists
2025-05-23 17:36:31 [main] INFO  c.j.module.vectordb.VectorDbService - Qdrant client initialized successfully
2025-05-23 17:36:31 [main] INFO  c.j.module.indexer.EmbeddingService - Initializing embedding models...
2025-05-23 17:36:31 [main] INFO  c.j.module.indexer.EmbeddingService - Loading code embedding model: intfloat/multilingual-e5-large
2025-05-23 17:36:36 [main] INFO  ai.djl.pytorch.engine.PtEngine - PyTorch graph executor optimizer is enabled, this may impact your inference latency and throughput. See: https://docs.djl.ai/master/docs/development/inference_performance_optimization.html#graph-executor-optimization
2025-05-23 17:36:36 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of inter-op threads is 8
2025-05-23 17:36:36 [main] INFO  ai.djl.pytorch.engine.PtEngine - Number of intra-op threads is 6
2025-05-23 17:36:38 [main] INFO  ai.djl.util.Platform - Found matching platform from: jar:file:/Users/damekjan/.m2/repository/ai/djl/huggingface/tokenizers/0.33.0/tokenizers-0.33.0.jar!/native/lib/tokenizers.properties
2025-05-23 17:36:38 [main] INFO  c.j.module.indexer.EmbeddingService - Loading text embedding model: intfloat/multilingual-e5-large
2025-05-23 17:36:39 [main] INFO  c.j.module.indexer.EmbeddingService - Embedding models initialized successfully
2025-05-23 17:36:39 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Initializing HuggingFace tokenizer with model: gpt2
2025-05-23 17:36:40 [main] WARN  a.d.h.t.HuggingFaceTokenizer - maxLength is not explicitly specified, use modelMaxLength: 512
2025-05-23 17:36:40 [main] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer initialized successfully
2025-05-23 17:36:40 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23 17:36:40 [main] INFO  o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-05-23 17:36:41 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-23 17:36:41 [main] INFO  com.jervis.JervisApplicationKt - Started JervisApplicationKt in 12.581 seconds (process running for 13.419)
2025-05-23 17:36:42 [main] INFO  com.jervis.utils.MacOSAppUtils - Ikona v docku byla úspěšně nastavena pomocí Taskbar API
2025-05-23 17:36:51 [http-nio-8080-exec-7] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23 17:36:51 [http-nio-8080-exec-7] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-23 17:36:51 [http-nio-8080-exec-7] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 14 ms
2025-05-23 17:36:52 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:36:52 [http-nio-8080-exec-7] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:36:52 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:36:52 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:36:52 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Processing chat completion request: Determine if the following context is required to ...
2025-05-23 17:36:52 [http-nio-8080-exec-8] INFO  c.jervis.service.CompletionService - Processing chat completion request: You are given a user's request to JetBrains intell...
2025-05-23 17:36:52 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:36:52 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:36:52 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:36:52 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:36:52 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:36:52 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:36:54 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:36:58 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:36:58 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:36:58 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:36:58 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:36:58 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:36:58 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:58 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:58 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3072, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:58 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:36:58 [http-nio-8080-exec-8] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3103, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:59 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:36:59 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3103, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:59 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:36:59 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3103, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:59 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:36:59 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3103, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:36:59 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Refined query: Is the context regarding the use of `OracleMeasureSaver` and `MeasuringPointJdbcAsyncWriter` related to the StorageService in `StorageService.kt`?
2025-05-23 17:36:59 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:36:59 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Refined query: OracleMeasureSaver  
MeasuringPointJdbcAsyncWriter  
odesilaji merici body
2025-05-23 17:36:59 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:00 [http-nio-8080-exec-8] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:00 [http-nio-8080-exec-2] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:00 [http-nio-8080-exec-8] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3103, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:00 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3103, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:00 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:37:00 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3107, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the context about OracleMeasureSaver and MeasuringPointJdbcAsyncWriter required to understand the SynchronizationService implementation in Kotlin?"
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:00 [http-nio-8080-exec-10] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:00 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3107, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:00 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:37:00 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Does the MeasuringPointJdbcAsyncWriter actually send measuring points using OracleMeasureSaver, and is there any documentation or implementation details about this functionality?"
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:01 [http-nio-8080-exec-7] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:01 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the OracleMeasureSaver using MeasuringPointJdbcAsyncWriter to send measuring points, and does this relate to the ContainerReconstructionScheduler?"
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:01 [http-nio-8080-exec-5] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:01 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:02 [http-nio-8080-exec-2] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:02 [http-nio-8080-exec-2] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:02 [http-nio-8080-exec-7] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:02 [http-nio-8080-exec-7] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:03 [http-nio-8080-exec-2] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: "Is the use of OracleMeasureSaver with MeasuringPointJdbcAsyncWriter for sending measuring points described or referenced in the TracingStorage service or related documentation?"
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:03 [http-nio-8080-exec-9] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:03 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:03 [http-nio-8080-exec-10] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:03 [http-nio-8080-exec-10] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:03 [http-nio-8080-exec-7] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:37:03 [http-nio-8080-exec-10] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:37:05 [http-nio-8080-exec-5] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:05 [http-nio-8080-exec-5] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:06 [http-nio-8080-exec-5] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:37:06 [http-nio-8080-exec-9] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:06 [http-nio-8080-exec-9] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:06 [http-nio-8080-exec-8] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:06 [http-nio-8080-exec-8] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:07 [http-nio-8080-exec-9] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:37:08 [http-nio-8080-exec-8] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:37:08 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Processing chat completion request: Opravdu se odesilaji merici body pres OracleMeasur...
2025-05-23 17:37:08 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 1: Initial RAG query
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:09 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:09 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:10 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 2: LLM query refinement
2025-05-23 17:37:10 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Refined query: Refined query: Jaký je proces odesílání měřicích bodů pomocí OracleMeasureSaver a MeasuringPointJdbcAsyncWriter? Jaké technologie a metody jsou při tom využívány?
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 3: Final RAG query with refined query
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching for similar documents with filter: {project=1}
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in unified collection: unified_vectors
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Searching in collection: unified_vectors
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Applied filter to search
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Executing search in collection: unified_vectors
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 results in collection: unified_vectors
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Found 0 total results across all collections
2025-05-23 17:37:11 [http-nio-8080-exec-3] DEBUG c.j.module.vectordb.VectorDbService - Returning 0 results after sorting and limiting
2025-05-23 17:37:11 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for OUTPUT tokens. Current usage: 3111, Limit: 4000. Falling back to OpenAI.
2025-05-23 17:37:16 [http-nio-8080-exec-3] DEBUG c.jervis.service.CompletionService - Phase 4: LLM processing of final RAG result
2025-05-23 17:37:16 [http-nio-8080-exec-3] INFO  c.j.m.l.TokenRateLimiter - Rate limit exceeded for INPUT tokens. Current usage: 39922, Limit: 40000. Falling back to OpenAI.
2025-05-23 17:37:20 [http-nio-8080-exec-3] INFO  c.jervis.service.CompletionService - Chat completion request processed successfully
2025-05-23 17:48:32 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23 17:48:32 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-23 17:48:32 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - Closing HuggingFace tokenizer
2025-05-23 17:48:32 [SpringApplicationShutdownHook] INFO  c.j.m.i.t.HuggingFaceTokenizerImpl - HuggingFace tokenizer closed successfully
2025-05-23 17:48:32 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Closing embedding models...
2025-05-23 17:48:34 [SpringApplicationShutdownHook] INFO  c.j.module.indexer.EmbeddingService - Embedding models closed successfully
2025-05-23 17:48:34 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Closing Qdrant client
2025-05-23 17:48:34 [SpringApplicationShutdownHook] INFO  c.j.module.vectordb.VectorDbService - Qdrant client closed successfully
2025-05-23 17:48:34 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23 17:48:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-23 17:48:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
