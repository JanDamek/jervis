# ═══════════════════════════════════════════════════════════════════════
# PENDING TASK GOALS - Task-specific instructions for agent
# ═══════════════════════════════════════════════════════════════════════
#
# RULES NAMING CONVENTION:
# Agent has freedom to name rules consistently and logically for future searchability.
# Examples: "kotlin_naming_convention", "repository_base_class", "api_versioning_v1"
# Agent should use snake_case, be descriptive, and maintain consistency across similar rules.
#
# ═══════════════════════════════════════════════════════════════════════

pendingTaskGoals:
  DATA_PROCESSING:
    schema: |
      Data processing tasks are not processed by qualification agent.
      These tasks bypass CPU and go directly to specialized handlers.
    exampleInput: ""
    exampleOutput: ""
  USER_INPUT_PROCESSING:
    schema: |
      Process user-created task. Bypasses CPU - goes to GPU for complex reasoning.
      Use storeKnowledge for results.
    exampleInput: |
      User: john@company.com
      Request: "Analyze recent commits to authentication module and create summary"
    exampleOutput: |
      [
        { "name": "searchKnowledge", "arguments": { "query": "authentication module commits", "alpha": 0.5, "maxResults": 20 } },
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Authentication module commits summary: Added OAuth2 support, fixed JWT validation, improved error handling.",
            "graphStructure": [
              "analysis::auth_commits_2024 -[requested_by]-> user::john@company.com"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Analyzed authentication commits" } }
      ]

  LINK_PROCESSING:
    schema: |
      Extract link content. SAFETY FIRST - check unsafe patterns.
      Use storeKnowledge for safe links.
    exampleInput: |
      URL: https://docs.example.com/api/authentication
      Source: confluence::page456
      Context: "See our authentication guide"
    exampleOutput: |
      [
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Authentication API documentation. OAuth 2.0 flow with JWT tokens. Client credentials grant type supported.",
            "graphStructure": [
              "link::docs_auth_guide -[found_in]-> confluence::page456"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Indexed authentication guide" } }
      ]

  EMAIL_PROCESSING:
    schema: |
      Extract People, Topics, Action Items from email communication.
      Use storeKnowledge with content and simple graph triplets.
      Format: "source -[relationship]-> target"
    exampleInput: |
      From: john@company.com
      To: team@company.com
      Subject: Budget Review Meeting

      Please review the Q4 budget by Friday. We need everyone's approval before the board meeting.
    exampleOutput: |
      [
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Please review the Q4 budget by Friday. We need everyone's approval before the board meeting.",
            "graphStructure": [
              "email::msg123 -[from]-> person::john@company.com",
              "email::msg123 -[mentions]-> task::budget_review_q4"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Email from john about budget review" } }
      ]

  JIRA_PROCESSING:
    schema: |
      Extract issue metadata, assignees, and relationships.
      Use storeKnowledge with content and graph triplets.
    exampleInput: |
      Issue: PROJ-123
      Summary: Fix login authentication bug
      Assignee: alice@company.com
      Reporter: bob@company.com
      Status: In Progress
      Priority: High

      Users cannot login after recent OAuth update. Need to fix token validation.
    exampleOutput: |
      [
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Users cannot login after recent OAuth update. Need to fix token validation.",
            "graphStructure": [
              "jira::PROJ-123 -[assigned_to]-> person::alice@company.com",
              "jira::PROJ-123 -[reported_by]-> person::bob@company.com"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Jira PROJ-123 login bug assigned to alice" } }
      ]

  CONFLUENCE_PROCESSING:
    schema: |
      Extract Knowledge: Rules, Concepts, Procedures. MICRO-CHUNKING - separate calls for each fact.
      Focus on CONTENT. Each rule/concept = separate storeKnowledge call.
    exampleInput: |
      Page: Password Security Policy
      Space: IT Policies

      ## Password Requirements
      All employees must update their passwords every 90 days. Passwords must contain at least one special character and be minimum 12 characters long.

      ## Multi-Factor Authentication
      MFA is mandatory for all production system access.
    exampleOutput: |
      [
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "All employees must update their passwords every 90 days.",
            "graphStructure": [
              "rule::password_rotation -[defined_in]-> confluence::page123",
              "rule::password_rotation -[category]-> security"
            ]
          }
        },
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Passwords must contain at least one special character and be minimum 12 characters long.",
            "graphStructure": [
              "rule::password_complexity -[defined_in]-> confluence::page123",
              "rule::password_complexity -[category]-> security"
            ]
          }
        },
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "MFA is mandatory for all production system access.",
            "graphStructure": [
              "rule::mfa_mandatory -[defined_in]-> confluence::page123",
              "rule::mfa_mandatory -[category]-> security"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Extracted 3 security rules" } }
      ]

  ANALYSIS_PROCESSING:
    schema: |
      Deep investigation. Bypasses CPU. DEPENDENCY DISCOVERY - exhaustive RAG search.
      Use multiple storeKnowledge calls for findings.
    exampleInput: |
      Analysis: "Investigate authentication failures"
      Context: OAuth token validation errors
    exampleOutput: |
      [
        { "name": "searchKnowledge", "arguments": { "query": "OAuth token validation", "alpha": 0.5, "maxResults": 30 } },
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Root cause: JWT token expiry not handled correctly in TokenValidator.java line 147. Missing refresh token logic.",
            "graphStructure": [
              "analysis::auth_failure_investigation -[identified_issue]-> file::TokenValidator.java"
            ]
          }
        },
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Recommendation: Implement automatic token refresh before expiry. Add retry logic with exponential backoff.",
            "graphStructure": [
              "rule::token_refresh_pattern -[category]-> authentication"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Identified root cause" } }
      ]

  SCHEDULED_PROCESSING:
    schema: |
      Scheduled task. TIME CRITICAL - ~10 minutes lead time.
      Use storeKnowledge for execution results.
    exampleInput: |
      Scheduled: 2024-01-15 14:00
      Action: "Send status report email to client@example.com"
    exampleOutput: |
      [
        { "name": "searchKnowledge", "arguments": { "query": "project status recent updates", "alpha": 0.5, "maxResults": 10 } },
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "Weekly status report sent: Sprint 23 completed, 15 tickets closed, authentication refactoring in progress.",
            "graphStructure": [
              "scheduled::weekly_status_2024_01_15 -[executed]-> action::email_status_report"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Status report sent" } }
      ]

  FILE_PROCESSING:
    schema: |
      File metadata extraction. Use storeKnowledge.
    exampleInput: |
      File: src/auth/TokenValidator.java
      Project: backend-api
      Module: authentication
    exampleOutput: |
      [
        {
          "name": "storeKnowledge",
          "arguments": {
            "content": "TokenValidator.java: JWT token validation logic with expiry checking and signature verification.",
            "graphStructure": [
              "file::src/auth/TokenValidator.java -[belongs_to]-> project::backend-api",
              "file::src/auth/TokenValidator.java -[part_of]-> module::authentication"
            ]
          }
        },
        { "name": "routeTask", "arguments": { "routing": "DONE", "contextSummary": "Indexed TokenValidator.java" } }
      ]
